

/**
 * Maps language names to their most representative country flag emoji.
 * Extend this as needed for new languages.
 */
export function languageToFlag(language: string): string {
  console.log("ğŸ³ï¸ languageToFlag called with:", language);
  
  const mapping: Record<string, string> = {
    English: "ğŸ‡¬ğŸ‡§",
    english: "ğŸ‡¬ğŸ‡§",
    "English (South Africa)": "ğŸ‡¿ğŸ‡¦",
    "english (south africa)": "ğŸ‡¿ğŸ‡¦",
    "South Africa": "ğŸ‡¿ğŸ‡¦",
    Spanish: "ğŸ‡ªğŸ‡¸",
    spanish: "ğŸ‡ªğŸ‡¸",
    "Colombian Spanish": "ğŸ‡¨ğŸ‡´",
    "colombian spanish": "ğŸ‡¨ğŸ‡´",
    "Mexican Spanish": "ğŸ‡²ğŸ‡½",
    "mexican spanish": "ğŸ‡²ğŸ‡½",
    "Costa Rican Spanish": "ğŸ‡¨ğŸ‡·",
    "costa rican spanish": "ğŸ‡¨ğŸ‡·",
    "Argentinian Spanish": "ğŸ‡¦ğŸ‡·",
    "argentinian spanish": "ğŸ‡¦ğŸ‡·",
    "Spanish (Colombia)": "ğŸ‡¨ğŸ‡´",
    "spanish (colombia)": "ğŸ‡¨ğŸ‡´",
    "Spanish (Mexico)": "ğŸ‡²ğŸ‡½",
    "spanish (mexico)": "ğŸ‡²ğŸ‡½",
    "Spanish (Argentina)": "ğŸ‡¦ğŸ‡·",
    "spanish (argentina)": "ğŸ‡¦ğŸ‡·",
    "Spanish (Cuba)": "ğŸ‡¨ğŸ‡º",
    "spanish (cuba)": "ğŸ‡¨ğŸ‡º",
    "Spanish (Dominican Republic)": "ğŸ‡©ğŸ‡´",
    "spanish (dominican republic)": "ğŸ‡©ğŸ‡´",
    French: "ğŸ‡«ğŸ‡·",
    french: "ğŸ‡«ğŸ‡·",
    "French (Canada)": "ğŸ‡¨ğŸ‡¦",
    "french (canada)": "ğŸ‡¨ğŸ‡¦",
    "Canadian French": "ğŸ‡¨ğŸ‡¦",
    "canadian french": "ğŸ‡¨ğŸ‡¦",
    German: "ğŸ‡©ğŸ‡ª",
    german: "ğŸ‡©ğŸ‡ª",
    "German (Austria)": "ğŸ‡¦ğŸ‡¹",
    "german (austria)": "ğŸ‡¦ğŸ‡¹",
    "German (Switzerland)": "ğŸ‡¨ğŸ‡­",
    "german (switzerland)": "ğŸ‡¨ğŸ‡­",
    Italian: "ğŸ‡®ğŸ‡¹",
    italian: "ğŸ‡®ğŸ‡¹",
    Dutch: "ğŸ‡³ğŸ‡±",
    dutch: "ğŸ‡³ğŸ‡±",
    "Dutch (Belgium)": "ğŸ‡§ğŸ‡ª",
    "dutch (belgium)": "ğŸ‡§ğŸ‡ª",
    Portuguese: "ğŸ‡µğŸ‡¹",
    portuguese: "ğŸ‡µğŸ‡¹",
    "Portuguese (Brazil)": "ğŸ‡§ğŸ‡·",
    "portuguese (brazil)": "ğŸ‡§ğŸ‡·",
    "Brazilian Portuguese": "ğŸ‡§ğŸ‡·",
    "brazilian portuguese": "ğŸ‡§ğŸ‡·",
    Russian: "ğŸ‡·ğŸ‡º",
    russian: "ğŸ‡·ğŸ‡º",
    Japanese: "ğŸ‡¯ğŸ‡µ",
    japanese: "ğŸ‡¯ğŸ‡µ",
    Chinese: "ğŸ‡¨ğŸ‡³",
    chinese: "ğŸ‡¨ğŸ‡³",
    "Chinese (Simplified)": "ğŸ‡¨ğŸ‡³",
    "chinese (simplified)": "ğŸ‡¨ğŸ‡³",
    "Chinese (Traditional)": "ğŸ‡¹ğŸ‡¼",
    "chinese (traditional)": "ğŸ‡¹ğŸ‡¼",
    "Mandarin": "ğŸ‡¨ğŸ‡³",
    "mandarin": "ğŸ‡¨ğŸ‡³",
    Korean: "ğŸ‡°ğŸ‡·",
    korean: "ğŸ‡°ğŸ‡·",
    Arabic: "ğŸ‡ªğŸ‡¬",
    arabic: "ğŸ‡ªğŸ‡¬",
    "Arabic (Saudi Arabia)": "ğŸ‡¸ğŸ‡¦",
    "arabic (saudi arabia)": "ğŸ‡¸ğŸ‡¦",
    "Arabic (UAE)": "ğŸ‡¦ğŸ‡ª",
    "arabic (uae)": "ğŸ‡¦ğŸ‡ª",
    
    // INDIAN SUBCONTINENT LANGUAGES
    Hindi: "ğŸ‡®ğŸ‡³",
    hindi: "ğŸ‡®ğŸ‡³",
    Bengali: "ğŸ‡§ğŸ‡©",
    bengali: "ğŸ‡§ğŸ‡©",
    Tamil: "ğŸ‡®ğŸ‡³",
    tamil: "ğŸ‡®ğŸ‡³",
    "Tamil (Sri Lanka)": "ğŸ‡±ğŸ‡°",
    "tamil (sri lanka)": "ğŸ‡±ğŸ‡°",
    Telugu: "ğŸ‡®ğŸ‡³",
    telugu: "ğŸ‡®ğŸ‡³",
    Marathi: "ğŸ‡®ğŸ‡³",
    marathi: "ğŸ‡®ğŸ‡³",
    Gujarati: "ğŸ‡®ğŸ‡³",
    gujarati: "ğŸ‡®ğŸ‡³",
    Punjabi: "ğŸ‡®ğŸ‡³",
    punjabi: "ğŸ‡®ğŸ‡³",
    Urdu: "ğŸ‡µğŸ‡°",
    urdu: "ğŸ‡µğŸ‡°",
    
    // EUROPEAN LANGUAGES
    Polish: "ğŸ‡µğŸ‡±",
    polish: "ğŸ‡µğŸ‡±",
    Turkish: "ğŸ‡¹ğŸ‡·",
    turkish: "ğŸ‡¹ğŸ‡·",
    Ukrainian: "ğŸ‡ºğŸ‡¦",
    ukrainian: "ğŸ‡ºğŸ‡¦",
    Swedish: "ğŸ‡¸ğŸ‡ª",
    swedish: "ğŸ‡¸ğŸ‡ª",
    Norwegian: "ğŸ‡³ğŸ‡´",
    norwegian: "ğŸ‡³ğŸ‡´",
    Danish: "ğŸ‡©ğŸ‡°",
    danish: "ğŸ‡©ğŸ‡°",
    Finnish: "ğŸ‡«ğŸ‡®",
    finnish: "ğŸ‡«ğŸ‡®",
    Czech: "ğŸ‡¨ğŸ‡¿",
    czech: "ğŸ‡¨ğŸ‡¿",
    Greek: "ğŸ‡¬ğŸ‡·",
    greek: "ğŸ‡¬ğŸ‡·",
    Hungarian: "ğŸ‡­ğŸ‡º",
    hungarian: "ğŸ‡­ğŸ‡º",
    Romanian: "ğŸ‡·ğŸ‡´",
    romanian: "ğŸ‡·ğŸ‡´",
    Slovak: "ğŸ‡¸ğŸ‡°",
    slovak: "ğŸ‡¸ğŸ‡°",
    Bulgarian: "ğŸ‡§ğŸ‡¬",
    bulgarian: "ğŸ‡§ğŸ‡¬",
    Croatian: "ğŸ‡­ğŸ‡·",
    croatian: "ğŸ‡­ğŸ‡·",
    Serbian: "ğŸ‡·ğŸ‡¸",
    serbian: "ğŸ‡·ğŸ‡¸",
    Catalan: "ğŸ‡ªğŸ‡¸",
    catalan: "ğŸ‡ªğŸ‡¸",
    
    // ASIAN LANGUAGES
    Indonesian: "ğŸ‡®ğŸ‡©",
    indonesian: "ğŸ‡®ğŸ‡©",
    Malay: "ğŸ‡²ğŸ‡¾",
    malay: "ğŸ‡²ğŸ‡¾",
    Thai: "ğŸ‡¹ğŸ‡­",
    thai: "ğŸ‡¹ğŸ‡­",
    Vietnamese: "ğŸ‡»ğŸ‡³",
    vietnamese: "ğŸ‡»ğŸ‡³",
    
    // AFRICAN LANGUAGES
    Afrikaans: "ğŸ‡¿ğŸ‡¦",
    afrikaans: "ğŸ‡¿ğŸ‡¦",
    Swahili: "ğŸ‡¹ğŸ‡¿",
    swahili: "ğŸ‡¹ğŸ‡¿",
    Zulu: "ğŸ‡¿ğŸ‡¦",
    zulu: "ğŸ‡¿ğŸ‡¦",
    
    // MIDDLE EASTERN LANGUAGES
    Farsi: "ğŸ‡®ğŸ‡·",
    farsi: "ğŸ‡®ğŸ‡·",
    Persian: "ğŸ‡®ğŸ‡·",
    persian: "ğŸ‡®ğŸ‡·",
    Hebrew: "ğŸ‡®ğŸ‡±",
    hebrew: "ğŸ‡®ğŸ‡±",
    
    // AFRICAN REGIONAL
    Mali: "ğŸ‡²ğŸ‡±",
    mali: "ğŸ‡²ğŸ‡±",
    Bambara: "ğŸ‡²ğŸ‡±",
    bambara: "ğŸ‡²ğŸ‡±",
    
    // CELTIC LANGUAGES
    Irish: "ğŸ‡®ğŸ‡ª",
    irish: "ğŸ‡®ğŸ‡ª",
    Gaeilge: "ğŸ‡®ğŸ‡ª",
    gaeilge: "ğŸ‡®ğŸ‡ª",
    Scottish: "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿",
    scottish: "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿",
    "Scottish Gaelic": "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿",
    "scottish gaelic": "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿",
    
    // PACIFIC ISLANDS
    "Tagalog": "ğŸ‡µğŸ‡­",
    "tagalog": "ğŸ‡µğŸ‡­",
    "Filipino": "ğŸ‡µğŸ‡­",
    "filipino": "ğŸ‡µğŸ‡­",
    "Cebuano": "ğŸ‡µğŸ‡­",
    "cebuano": "ğŸ‡µğŸ‡­",
    "English (Philippines)": "ğŸ‡µğŸ‡­",
    "english (philippines)": "ğŸ‡µğŸ‡­",
    "Sinhala": "ğŸ‡±ğŸ‡°",
    "sinhala": "ğŸ‡±ğŸ‡°",
    "English (Sri Lanka)": "ğŸ‡±ğŸ‡°",
    "english (sri lanka)": "ğŸ‡±ğŸ‡°",
    "Icelandic": "ğŸ‡®ğŸ‡¸",
    "icelandic": "ğŸ‡®ğŸ‡¸",
    "Maltese": "ğŸ‡²ğŸ‡¹",
    "maltese": "ğŸ‡²ğŸ‡¹",
    "English (Malta)": "ğŸ‡²ğŸ‡¹",
    "english (malta)": "ğŸ‡²ğŸ‡¹",
    "MÄori": "ğŸ‡³ğŸ‡¿",
    "mÄori": "ğŸ‡³ğŸ‡¿",
    "Maori": "ğŸ‡³ğŸ‡¿",
    "maori": "ğŸ‡³ğŸ‡¿",
    "English (New Zealand)": "ğŸ‡³ğŸ‡¿",
    "english (new zealand)": "ğŸ‡³ğŸ‡¿",
    "Samoan": "ğŸ‡¼ğŸ‡¸",
    "samoan": "ğŸ‡¼ğŸ‡¸",
    "Fijian": "ğŸ‡«ğŸ‡¯",
    "fijian": "ğŸ‡«ğŸ‡¯",
    "English (Fiji)": "ğŸ‡«ğŸ‡¯",
    "english (fiji)": "ğŸ‡«ğŸ‡¯",
    "Hindi (Fiji)": "ğŸ‡«ğŸ‡¯",
    "hindi (fiji)": "ğŸ‡«ğŸ‡¯",
    "Tongan": "ğŸ‡¹ğŸ‡´",
    "tongan": "ğŸ‡¹ğŸ‡´",
    "English (Tonga)": "ğŸ‡¹ğŸ‡´",
    "english (tonga)": "ğŸ‡¹ğŸ‡´",
    "Chamorro": "ğŸ‡¬ğŸ‡º",
    "chamorro": "ğŸ‡¬ğŸ‡º",
    "English (Guam)": "ğŸ‡¬ğŸ‡º",
    "english (guam)": "ğŸ‡¬ğŸ‡º",
    "Marshallese": "ğŸ‡²ğŸ‡­",
    "marshallese": "ğŸ‡²ğŸ‡­",
    "English (Marshall Islands)": "ğŸ‡²ğŸ‡­",
    "english (marshall islands)": "ğŸ‡²ğŸ‡­",
    "Palauan": "ğŸ‡µğŸ‡¼",
    "palauan": "ğŸ‡µğŸ‡¼",
    "English (Palau)": "ğŸ‡µğŸ‡¼",
    "english (palau)": "ğŸ‡µğŸ‡¼",
    "Nauruan": "ğŸ‡³ğŸ‡·",
    "nauruan": "ğŸ‡³ğŸ‡·",
    "English (Nauru)": "ğŸ‡³ğŸ‡·",
    "english (nauru)": "ğŸ‡³ğŸ‡·",
    "Tuvaluan": "ğŸ‡¹ğŸ‡»",
    "tuvaluan": "ğŸ‡¹ğŸ‡»",
    "English (Tuvalu)": "ğŸ‡¹ğŸ‡»",
    "english (tuvalu)": "ğŸ‡¹ğŸ‡»",
    "Kirghiz": "ğŸ‡°ğŸ‡®",
    "kirghiz": "ğŸ‡°ğŸ‡®",
    "English (Kiribati)": "ğŸ‡°ğŸ‡®",
    "english (kiribati)": "ğŸ‡°ğŸ‡®",
    "Vanuatuan": "ğŸ‡»ğŸ‡º",
    "vanuatuan": "ğŸ‡»ğŸ‡º",
    "Bislama": "ğŸ‡»ğŸ‡º",
    "bislama": "ğŸ‡»ğŸ‡º",
    "English (Vanuatu)": "ğŸ‡»ğŸ‡º",
    "english (vanuatu)": "ğŸ‡»ğŸ‡º",
    "French (Vanuatu)": "ğŸ‡»ğŸ‡º",
    "french (vanuatu)": "ğŸ‡»ğŸ‡º",
    "Solomon Islands Pidgin": "ğŸ‡¸ğŸ‡§",
    "solomon islands pidgin": "ğŸ‡¸ğŸ‡§",
    "English (Solomon Islands)": "ğŸ‡¸ğŸ‡§",
    "english (solomon islands)": "ğŸ‡¸ğŸ‡§",
    "Papua New Guinea": "ğŸ‡µğŸ‡¬",
    "papua new guinea": "ğŸ‡µğŸ‡¬",
    "English (Papua New Guinea)": "ğŸ‡µğŸ‡¬",
    "english (papua new guinea)": "ğŸ‡µğŸ‡¬",
    "Tok Pisin": "ğŸ‡µğŸ‡¬",
    "tok pisin": "ğŸ‡µğŸ‡¬",
    
    // CARIBBEAN
    "English (Jamaica)": "ğŸ‡¯ğŸ‡²",
    "english (jamaica)": "ğŸ‡¯ğŸ‡²",
    "Jamaican Patois": "ğŸ‡¯ğŸ‡²",
    "jamaican patois": "ğŸ‡¯ğŸ‡²",
    "English (Barbados)": "ğŸ‡§ğŸ‡§",
    "english (barbados)": "ğŸ‡§ğŸ‡§",
    "English (Trinidad and Tobago)": "ğŸ‡¹ğŸ‡¹",
    "english (trinidad and tobago)": "ğŸ‡¹ğŸ‡¹",
    "English (Bahamas)": "ğŸ‡§ğŸ‡¸",
    "english (bahamas)": "ğŸ‡§ğŸ‡¸",
    "Haitian Creole": "ğŸ‡­ğŸ‡¹",
    "haitian creole": "ğŸ‡­ğŸ‡¹",
    "French (Haiti)": "ğŸ‡­ğŸ‡¹",
    "french (haiti)": "ğŸ‡­ğŸ‡¹",
    "English (Dominican Republic)": "ğŸ‡©ğŸ‡´",
    "english (dominican republic)": "ğŸ‡©ğŸ‡´",
    "English (Cuba)": "ğŸ‡¨ğŸ‡º",
    "english (cuba)": "ğŸ‡¨ğŸ‡º",
    
    // EUROPEAN ISLANDS
    "Corsican": "ğŸ‡«ğŸ‡·",
    "corsican": "ğŸ‡«ğŸ‡·",
    "French (Corsica)": "ğŸ‡«ğŸ‡·",
    "french (corsica)": "ğŸ‡«ğŸ‡·",
    "Sardinian": "ğŸ‡®ğŸ‡¹",
    "sardinian": "ğŸ‡®ğŸ‡¹",
    "Italian (Sardinia)": "ğŸ‡®ğŸ‡¹",
    "italian (sardinia)": "ğŸ‡®ğŸ‡¹",
    "Sicilian": "ğŸ‡®ğŸ‡¹",
    "sicilian": "ğŸ‡®ğŸ‡¹",
    "Italian (Sicily)": "ğŸ‡®ğŸ‡¹",
    "italian (sicily)": "ğŸ‡®ğŸ‡¹",
    "Faroese": "ğŸ‡«ğŸ‡´",
    "faroese": "ğŸ‡«ğŸ‡´",
    "Danish (Faroe Islands)": "ğŸ‡«ğŸ‡´",
    "danish (faroe islands)": "ğŸ‡«ğŸ‡´",
    "Greenlandic": "ğŸ‡¬ğŸ‡±",
    "greenlandic": "ğŸ‡¬ğŸ‡±",
    "Danish (Greenland)": "ğŸ‡¬ğŸ‡±",
    "danish (greenland)": "ğŸ‡¬ğŸ‡±",
    
    // OVERSEAS TERRITORIES
    "English (Bermuda)": "ğŸ‡§ğŸ‡²",
    "english (bermuda)": "ğŸ‡§ğŸ‡²",
    "English (Cayman Islands)": "ğŸ‡°ğŸ‡¾",
    "english (cayman islands)": "ğŸ‡°ğŸ‡¾",
    "English (British Virgin Islands)": "ğŸ‡»ğŸ‡¬",
    "english (british virgin islands)": "ğŸ‡»ğŸ‡¬",
    "English (US Virgin Islands)": "ğŸ‡»ğŸ‡®",
    "english (us virgin islands)": "ğŸ‡»ğŸ‡®",
    "English (Puerto Rico)": "ğŸ‡µğŸ‡·",
    "english (puerto rico)": "ğŸ‡µğŸ‡·",
    "Spanish (Puerto Rico)": "ğŸ‡µğŸ‡·",
    "spanish (puerto rico)": "ğŸ‡µğŸ‡·",
    "English (Aruba)": "ğŸ‡¦ğŸ‡¼",
    "english (aruba)": "ğŸ‡¦ğŸ‡¼",
    "Dutch (Aruba)": "ğŸ‡¦ğŸ‡¼",
    "dutch (aruba)": "ğŸ‡¦ğŸ‡¼",
    "Papiamento": "ğŸ‡¦ğŸ‡¼",
    "papiamento": "ğŸ‡¦ğŸ‡¼",
    "English (CuraÃ§ao)": "ğŸ‡¨ğŸ‡¼",
    "english (curaÃ§ao)": "ğŸ‡¨ğŸ‡¼",
    "Dutch (CuraÃ§ao)": "ğŸ‡¨ğŸ‡¼",
    "dutch (curaÃ§ao)": "ğŸ‡¨ğŸ‡¼",
    "French (Martinique)": "ğŸ‡²ğŸ‡¶",
    "french (martinique)": "ğŸ‡²ğŸ‡¶",
    "French (Guadeloupe)": "ğŸ‡¬ğŸ‡µ",
    "french (guadeloupe)": "ğŸ‡¬ğŸ‡µ",
    "French (RÃ©union)": "ğŸ‡·ğŸ‡ª",
    "french (rÃ©union)": "ğŸ‡·ğŸ‡ª",
    "French (Mayotte)": "ğŸ‡¾ğŸ‡¹",
    "french (mayotte)": "ğŸ‡¾ğŸ‡¹",
    
    // INDIAN OCEAN
    "English (Seychelles)": "ğŸ‡¸ğŸ‡¨",
    "english (seychelles)": "ğŸ‡¸ğŸ‡¨",
    "French (Seychelles)": "ğŸ‡¸ğŸ‡¨",
    "french (seychelles)": "ğŸ‡¸ğŸ‡¨",
    "Seychellois Creole": "ğŸ‡¸ğŸ‡¨",
    "seychellois creole": "ğŸ‡¸ğŸ‡¨",
    "English (Mauritius)": "ğŸ‡²ğŸ‡º",
    "english (mauritius)": "ğŸ‡²ğŸ‡º",
    "French (Mauritius)": "ğŸ‡²ğŸ‡º",
    "french (mauritius)": "ğŸ‡²ğŸ‡º",
    "Mauritian Creole": "ğŸ‡²ğŸ‡º",
    "mauritian creole": "ğŸ‡²ğŸ‡º",
    "English (Maldives)": "ğŸ‡²ğŸ‡»",
    "english (maldives)": "ğŸ‡²ğŸ‡»",
    "Dhivehi": "ğŸ‡²ğŸ‡»",
    "dhivehi": "ğŸ‡²ğŸ‡»",
    "Maldivian": "ğŸ‡²ğŸ‡»",
    "maldivian": "ğŸ‡²ğŸ‡»",
  };
  
  // Enhanced case-insensitive lookup with normalization
  const normalizedLanguage = language.trim();
  
  // First try exact match
  let flag = mapping[normalizedLanguage];
  if (flag) {
    console.log("ğŸ³ï¸ languageToFlag exact match:", normalizedLanguage, "â†’", flag);
    return flag;
  }
  
  // Try case-insensitive match
  flag = mapping[normalizedLanguage.toLowerCase()];
  if (flag) {
    console.log("ğŸ³ï¸ languageToFlag lowercase match:", normalizedLanguage, "â†’", flag);
    return flag;
  }
  
  // Try with first letter capitalized
  const capitalized = normalizedLanguage.charAt(0).toUpperCase() + normalizedLanguage.slice(1).toLowerCase();
  flag = mapping[capitalized];
  if (flag) {
    console.log("ğŸ³ï¸ languageToFlag capitalized match:", normalizedLanguage, "â†’", capitalized, "â†’", flag);
    return flag;
  }
  
  // Fallback to globe icon with warning
  console.warn("ğŸŒ languageToFlag: No flag found for language:", normalizedLanguage, "- using globe icon");
  return "ğŸŒ";
}

